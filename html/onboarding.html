<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Welcome to GeminiDesk</title>
    <link rel="stylesheet" href="styles/glass-theme.css">
    <style>
        /* Specific overrides for onboarding.html */
        html,
        body {
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background: var(--bg-root) !important;
        }

        /* Re-implement Top Bar with Glass style */
        .top-bar {
            width: 100%;
            height: 44px;
            -webkit-app-region: drag;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.03), transparent);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
            flex-shrink: 0;
            z-index: 10;
        }

        #chat-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            -webkit-app-region: drag;
        }

        .button-container {
            display: flex;
            align-items: center;
            -webkit-app-region: no-drag;
            gap: 8px;
        }

        .icon-button {
            -webkit-app-region: no-drag;
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .icon-button svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
        }

        .icon-button#settings-button svg {
            stroke-width: 0;
            fill: currentColor;
        }

        .icon-button:hover {
            background: var(--button-hover-bg);
            color: var(--text-primary);
        }

        /* Content Area */
        .content {
            padding: 40px;
            overflow-y: auto;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .title {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        html.light-mode .title {
            background: linear-gradient(135deg, #1e293b 0%, #4f46e5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 500px;
            line-height: 1.5;
        }

        /* Shortcuts List */
        .shortcuts-list {
            list-style-type: none;
            padding: 0;
            margin: 0 auto 40px auto;
            width: 100%;
            max-width: 550px;
            background: var(--glass-surface);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .shortcut-item {
            padding: 14px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--glass-border);
            transition: background-color 0.2s ease;
        }

        .shortcut-item:last-child {
            border-bottom: none;
        }

        .shortcut-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .shortcut-desc {
            font-size: 14px;
            font-weight: 400;
            color: var(--text-primary);
        }

        .shortcut-key {
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid var(--glass-border);
            font-size: 12px;
            color: var(--accent-primary);
            min-width: 60px;
            text-align: center;
        }

        /* Launch Button */
        .launch-button {
            background: var(--accent-gradient);
            border: none;
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-size: 15px;
            font-weight: 600;
            letter-spacing: 0.02em;
            transition: all 0.3s var(--ease-out);
            box-shadow: 0 4px 15px var(--accent-glow);
        }

        .launch-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--accent-glow);
        }

        .launch-button:active {
            transform: translateY(0);
        }
    </style>
</head>

<body>
    <!-- Background Effects -->
    <div class="orb-canvas" style="position: fixed; inset: 0; z-index: -1;"></div>
    <div class="noise-overlay" style="position: fixed; inset: 0; z-index: -1;"></div>

    <div class="top-bar">
        <span id="chat-title" data-i18n="welcome-title-bar">Welcome to GeminiDesk</span>
        <div class="button-container">
            <button id="new-window-button" class="icon-button" title="New Window">
                <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 4V20M4 12H20" />
                </svg>
            </button>
            <button id="settings-button" class="icon-button" title="Settings">
                <svg viewBox="0 0 24 24">
                    <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.69-1.62-0.92L14.4,2.28c-0.05-0.24-0.27-0.42-0.51-0.42 h-3.8c-0.24,0-0.46,0.18-0.51,0.42l-0.58,2.52C8.41,5.55,7.88,5.86,7.38,6.24l-2.39-0.96c-0.22-0.08-0.47,0-0.59,0.22 l-1.92,3.32c-0.11,0.2-0.06,0.47,0.12,0.61l2.03,1.58C4.02,11.36,4,11.68,4,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.69,1.62,0.92 l0.58,2.52c0.05,0.24,0.27,0.42,0.51,0.42h3.8c0.24,0,0.46-0.18,0.51,0.42l0.58-2.52c0.6-0.23,1.12-0.54,1.62-0.92l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.11-0.2,0.06-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />
                </svg>
            </button>
        </div>
    </div>

    <div class="content">
        <h1 class="title" data-i18n="welcome-title">Welcome to GeminiDesk</h1>
        <p class="subtitle" data-i18n="welcome-subtitle">Your AI assistant, supercharged for your desktop. Here are some
            shortcuts to get you started:</p>

        <ul class="shortcuts-list">
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-show-hide">Show / Hide Window</span>
                <span class="shortcut-key shortcut" data-win="Alt+G" data-mac="⌘+G"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-new-window">Open New Window</span>
                <span class="shortcut-key shortcut" data-win="Alt+N" data-mac="⌘+N"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-refresh">Refresh Window</span>
                <span class="shortcut-key shortcut" data-win="Alt+R" data-mac="⌘+R"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-search">Search Chats</span>
                <span class="shortcut-key shortcut" data-win="Alt+S" data-mac="⌘+S"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-screenshot">Screenshot to Chat</span>
                <span class="shortcut-key shortcut" data-win="Alt+Shift+S" data-mac="⌘+Shift+5"><span
                        class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-new-pro">New Chat (Pro Model)</span>
                <span class="shortcut-key shortcut" data-win="Alt+P" data-mac="⌘+P"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-new-flash">New Chat (Flash Model)</span>
                <span class="shortcut-key shortcut" data-win="Alt+F" data-mac="⌘+F"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-instructions">See Instructions Again</span>
                <span class="shortcut-key shortcut" data-win="Alt+I" data-mac="⌘+I"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-quit">Quit Application</span>
                <span class="shortcut-key shortcut" data-win="Alt+Q" data-mac="⌘+Q"><span class="key"></span></span>
            </li>
            <li class="shortcut-item">
                <span class="shortcut-desc" data-i18n="shortcut-move">Move Window</span>
                <span class="shortcut-key" data-i18n="shortcut-move-key">Drag Top Bar</span>
            </li>
        </ul>

        <button class="launch-button" id="launch-button" data-i18n="launch-button">Got it! Launch GeminiDesk</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (!window.electronAPI) {
                console.error("Electron API not found! Running in browser mode.");
                return;
            }

            // --- Event Listeners ---
            document.getElementById('settings-button').addEventListener('click', () => window.electronAPI.openSettingsWindow());
            document.getElementById('new-window-button').addEventListener('click', () => window.electronAPI.openNewWindow());
            document.getElementById('launch-button').addEventListener('click', () => window.electronAPI.completeOnboarding());

            // --- Platform-specific shortcuts ---
            const isMac = navigator.platform.toUpperCase().includes('MAC');
            document.querySelectorAll('.shortcut').forEach(el => {
                const keySpan = el.querySelector('.key');
                if (keySpan) keySpan.textContent = isMac ? el.dataset.mac : el.dataset.win;
            });

            // --- Internationalization (i18n) ---
            let translations = {};

            const applyTranslations = (lang) => {
                const dict = translations[lang] || translations.en;
                if (!dict) {
                    console.error(`No dictionary found for language: ${lang}`);
                    return;
                }
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (dict[key]) el.textContent = dict[key];
                });
                document.querySelectorAll('[data-tooltip-i18n]').forEach(el => {
                    const key = el.getAttribute('data-tooltip-i18n');
                    if (dict[key]) el.setAttribute('title', dict[key]);
                });
                document.documentElement.setAttribute('lang', lang);
                document.documentElement.setAttribute('dir', lang === 'he' ? 'rtl' : 'ltr');
            };

            const handleSettings = (settings) => {
                translations = settings?.translations || {};
                const lang = settings?.language || 'en';
                applyTranslations(lang);
                const theme = settings?.theme || 'system';
                window.electronAPI.theme.getResolved(theme).then(applyTheme);
            };

            window.electronAPI.getSettings().then(handleSettings);
            window.electronAPI.onSettingsUpdated(handleSettings);

            // --- Theme Application ---
            const applyTheme = (theme) => {
                if (theme === 'light') {
                    document.documentElement.classList.add('light-mode');
                } else {
                    document.documentElement.classList.remove('light-mode');
                }
            };
            window.electronAPI.theme.onUpdate(applyTheme);
        });
    </script>
</body>

</html>