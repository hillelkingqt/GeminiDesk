<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Release Notes</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap');
        :root {
            --bg-root: #131314;
            --glass-surface: #1e1f20;
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-primary: #e3e3e3;
            --text-secondary: #9aa0a6;
            --accent-primary: #8ab4f8;
            --radius-lg: 20px;
        }
        html.light-mode {
            --bg-root: #ffffff;
            --glass-surface: #f8f9fa;
            --glass-border: rgba(0, 0, 0, 0.08);
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --accent-primary: #1a73e8;
        }
        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Google Sans', 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-root); color: var(--text-primary); user-select: none;
        }
        .drag-bar {
            position: fixed; top: 0; left: 0; right: 0;
            height: 48px; -webkit-app-region: drag;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 16px; border-bottom: 1px solid var(--glass-border);
        }
        .drag-bar h2 {
            font-size: 16px; margin: 0; font-weight: 500;
        }
        #close-button {
            -webkit-app-region: no-drag; width: 32px; height: 32px;
            border-radius: 50%; border: none; background: transparent;
            color: var(--text-secondary); font-size: 20px;
            cursor: pointer; transition: all 0.15s ease;
        }
        #close-button:hover {
             background: rgba(255,255,255,0.1);
        }
        .content {
            padding: 64px 24px 24px; overflow-y: auto; height: calc(100vh - 88px);
        }
        .release-notes-container {
             background: var(--glass-surface); border: 1px solid var(--glass-border);
             border-radius: var(--radius-lg); padding: 20px;
        }
        .version-title {
            font-size: 1.5em; font-weight: 500; color: var(--accent-primary);
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="drag-bar">
        <h2 id="window-title">Release Notes</h2>
        <button id="close-button" title="Close">&times;</button>
    </div>
    <div class="content">
        <div class="release-notes-container" id="release-notes-content">
            <p>Loading release notes...</p>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        document.getElementById('close-button').addEventListener('click', () => {
            window.electronAPI.closeWindow();
        });

        window.electronAPI.onReleaseNotesContent((data) => {
            const { version, notes } = data;
            document.getElementById('window-title').textContent = `Release Notes - v${version}`;
            const contentDiv = document.getElementById('release-notes-content');
            contentDiv.innerHTML = marked.parse(notes);
        });

        function applyTheme(theme) {
            if (theme === 'light') {
                document.documentElement.classList.add('light-mode');
            } else {
                document.documentElement.classList.remove('light-mode');
            }
        }

        window.electronAPI.theme.getResolved().then(applyTheme);
        window.electronAPI.theme.onUpdate(applyTheme);
    </script>
</body>
</html>
